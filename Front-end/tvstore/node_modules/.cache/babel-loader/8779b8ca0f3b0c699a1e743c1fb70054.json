{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _FacebookContext = _interopRequireDefault(require(\"./FacebookContext\"));\n\nvar Initialize = /*#__PURE__*/function (_Component) {\n  (0, _inheritsLoose2.default)(Initialize, _Component);\n\n  function Initialize() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = Initialize.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.$isMounted = true;\n    this.prepare();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.$isMounted = false;\n  };\n\n  _proto.prepare = function prepare() {\n    var _this$props, onReady, handleInit, api;\n\n    return _regenerator.default.async(function prepare$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _this$props = this.props, onReady = _this$props.onReady, handleInit = _this$props.handleInit;\n            _context.next = 3;\n            return _regenerator.default.awrap(handleInit());\n\n          case 3:\n            api = _context.sent;\n\n            if (onReady && this.$isMounted) {\n              onReady(api);\n            }\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this);\n  };\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        isReady = _this$props2.isReady,\n        api = _this$props2.api;\n    var childrenProps = {\n      isReady: isReady,\n      api: api\n    };\n\n    if (typeof children === 'function') {\n      return children(childrenProps);\n    }\n\n    return children;\n  };\n\n  return Initialize;\n}(_react.Component);\n\n(0, _defineProperty2.default)(Initialize, \"defaultProps\", {\n  onReady: undefined,\n  api: undefined\n});\n\nvar _default = (0, _react.forwardRef)(function (props, ref) {\n  return _react.default.createElement(_FacebookContext.default.Consumer, null, function (_ref) {\n    var handleInit = _ref.handleInit,\n        isReady = _ref.isReady,\n        api = _ref.api;\n    return _react.default.createElement(Initialize, (0, _extends2.default)({}, props, {\n      handleInit: handleInit,\n      isReady: isReady,\n      api: api,\n      ref: ref\n    }));\n  });\n});\n\nexports.default = _default;","map":{"version":3,"sources":["../src/Initialize.jsx"],"names":["Initialize","Component","onReady","api","undefined","componentDidMount","componentWillUnmount","prepare","handleInit","render","children","isReady","childrenProps","ref"],"mappings":";;;;;;;;;;;;;;;;;AACA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,gBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,mBAAA,CAAA,CAAA;;IAUMA,U;;;;;;;;;SAMJK,iB,GAAAA,SAAAA,iBAAAA,GAAoB;AAClB,SAAA,UAAA,GAAA,IAAA;AACA,SAAA,OAAA;;;SAGFC,oB,GAAAA,SAAAA,oBAAAA,GAAuB;AACrB,SAAA,UAAA,GAAA,KAAA;;;SAGIC,O,GAAN,SAAA,OAAA,GAAA;AAAA,QAAA,WAAA,EAAA,OAAA,EAAA,UAAA,EAAA,GAAA;;AAAA,WAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,aAAA,CAAA,EAAA;AAAA,gBAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,eAAA,CAAA;AAAA,YAAA,WAAA,GACkC,KADlC,KAAA,EACUL,OADV,GAAA,WAAA,CAAA,OAAA,EACmBM,UADnB,GAAA,WAAA,CAAA,UAAA;AAAA,YAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAAA,mBAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAEoBA,UAFpB,EAAA,CAAA;;AAAA,eAAA,CAAA;AAEQL,YAAAA,GAFR,GAAA,QAAA,CAAA,IAEQA;;AACN,gBAAID,OAAO,IAAI,KAAf,UAAA,EAAgC;AAC9BA,cAAAA,OAAO,CAAPA,GAAO,CAAPA;AACD;;AALH,eAAA,CAAA;AAAA,eAAA,KAAA;AAAA,mBAAA,QAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,KAAA,EAAA,IAAA,EAAA,IAAA,CAAA;;;SAQAO,M,GAAAA,SAAAA,MAAAA,GAAS;AAAA,QAAA,YAAA,GAC4B,KAD5B,KAAA;AAAA,QACCC,QADD,GAAA,YAAA,CAAA,QAAA;AAAA,QACWC,OADX,GAAA,YAAA,CAAA,OAAA;AAAA,QACoBR,GADpB,GAAA,YAAA,CAAA,GAAA;AAGP,QAAMS,aAAa,GAAG;AACpBD,MAAAA,OAAO,EADa,OAAA;AAEpBR,MAAAA,GAAG,EAAHA;AAFoB,KAAtB;;AAKA,QAAI,OAAA,QAAA,KAAJ,UAAA,EAAoC;AAClC,aAAOO,QAAQ,CAAf,aAAe,CAAf;AACD;;AAED,WAAA,QAAA;;;;EAnCqBT,MAAAA,CAAAA,S;;8BAAnBD,U,kBACkB;AACpBE,EAAAA,OAAO,EADa,SAAA;AAEpBC,EAAAA,GAAG,EAAEC;AAFe,C;;eAsCT,CAAA,GAAA,MAAA,CAAA,UAAA,EAAW,UAAA,KAAA,EAAA,GAAA,EAAA;AAAA,SACxB,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,gBAAA,CAAD,OAAC,CAAD,QAAA,EAAA,IAAA,EACG,UAAA,IAAA,EAAA;AAAA,QAAGI,UAAH,GAAA,IAAA,CAAA,UAAA;AAAA,QAAeG,OAAf,GAAA,IAAA,CAAA,OAAA;AAAA,QAAwBR,GAAxB,GAAA,IAAA,CAAA,GAAA;AAAA,WACC,MAAA,CAAA,OAAA,CAAA,aAAA,CAAA,UAAA,EAAA,CAAA,GAAA,SAAA,CAAA,OAAA,EAAA,EAAA,EAAA,KAAA,EAAA;AAEE,MAAA,UAAU,EAFZ,UAAA;AAGE,MAAA,OAAO,EAHT,OAAA;AAIE,MAAA,GAAG,EAJL,GAAA;AAKE,MAAA,GAAG,EAAEU;AALP,KAAA,CAAA,CADD;AAFqB,GACxB,CADwB;AAAX,CAAA,C","sourcesContent":["// @flow\nimport React, { forwardRef, Component } from 'react';\nimport FacebookContext from './FacebookContext';\n\ntype Props = {\n  children: Function,\n  onReady?: Function,\n  handleInit: Function,\n  isReady: boolean,\n  api?: Object,\n};\n\nclass Initialize extends Component<Props> {\n  static defaultProps = {\n    onReady: undefined,\n    api: undefined,\n  };\n\n  componentDidMount() {\n    this.$isMounted = true;\n    this.prepare();\n  }\n\n  componentWillUnmount() {\n    this.$isMounted = false;\n  }\n\n  async prepare() {\n    const { onReady, handleInit } = this.props;\n    const api = await handleInit();\n    if (onReady && this.$isMounted) {\n      onReady(api);\n    }\n  }\n\n  render() {\n    const { children, isReady, api } = this.props;\n\n    const childrenProps = {\n      isReady,\n      api,\n    };\n\n    if (typeof children === 'function') {\n      return children(childrenProps);\n    }\n\n    return children;\n  }\n}\n\nexport default forwardRef((props, ref) => (\n  <FacebookContext.Consumer>\n    {({ handleInit, isReady, api }) => (\n      <Initialize\n        {...props}\n        handleInit={handleInit}\n        isReady={isReady}\n        api={api}\n        ref={ref}\n      />\n    )}\n  </FacebookContext.Consumer>\n));\n"]},"metadata":{},"sourceType":"script"}