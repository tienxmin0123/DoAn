{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Initialize = _interopRequireDefault(require(\"./Initialize\"));\n\nvar LoginStatus = /*#__PURE__*/function (_Component) {\n  (0, _inheritsLoose2.default)(LoginStatus, _Component);\n\n  function LoginStatus() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(_args)) || this;\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"state\", {});\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleReady\", function _callee(api) {\n      var event;\n      return _regenerator.default.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event = _this.props.event;\n\n              _this.setState({\n                api: api\n              });\n\n              _context.next = 4;\n              return _regenerator.default.awrap(api.subscribe(event, _this.handleChange));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"handleChange\", function () {\n      var onChange = _this.props.onChange;\n\n      if (onChange) {\n        onChange.apply(void 0, arguments);\n      }\n    });\n    return _this;\n  }\n\n  var _proto = LoginStatus.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var api = this.state.api,\n        event = this.props.event;\n\n    if (api) {\n      api.unsubscribe(event, this.handleChange);\n    }\n  };\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    return _react.default.createElement(_Initialize.default, {\n      onReady: this.handleReady\n    }, children);\n  };\n\n  return LoginStatus;\n}(_react.Component);\n\nexports.default = LoginStatus;\n(0, _defineProperty2.default)(LoginStatus, \"defaultProps\", {\n  onChange: undefined\n});","map":{"version":3,"sources":["../src/Subscribe.jsx"],"names":["LoginStatus","Component","onChange","undefined","componentWillUnmount","api","event","render","children","handleReady"],"mappings":";;;;;;;;;;;;;;;;;AACA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,WAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;;IAYqBA,W;;;;;;;;;;;wFAKJ,E;8FASD,SAAA,OAAA,CAAA,GAAA,EAAA;AAAA,UAAA,KAAA;AAAA,aAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,eAAA,CAAA,EAAA;AAAA,kBAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,iBAAA,CAAA;AACJM,cAAAA,KADI,GACM,KAAA,CADN,KACM,CADN,KACJA;;AAER,cAAA,KAAA,CAAA,QAAA,CAAc;AACZD,gBAAAA,GAAG,EAAHA;AADY,eAAd;;AAHY,cAAA,QAAA,CAAA,IAAA,GAAA,CAAA;AAAA,qBAAA,YAAA,CAAA,OAAA,CAAA,KAAA,CAONA,GAAG,CAAHA,SAAAA,CAAAA,KAAAA,EAAqB,KAAA,CAPf,YAONA,CAPM,CAAA;;AAAA,iBAAA,CAAA;AAAA,iBAAA,KAAA;AAAA,qBAAA,QAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,OAAA,CAAA;;+FAUC,YAAmB;AAAA,UACxBH,QADwB,GACX,KAAA,CADW,KACX,CADW,QAAA;;AAGhC,UAAA,QAAA,EAAc;AACZA,QAAAA,QAAQ,CAARA,KAAAA,CAAAA,KAAAA,CAAAA,EAAAA,SAAAA;AACD;;;;;;;SAtBHE,oB,GAAAA,SAAAA,oBAAAA,GAAuB;AAAA,QACJC,GADI,GAAA,KAAA,KAAA,CAAA,GAAA;AAAA,QACYC,KADZ,GAAA,KAAA,KAAA,CAAA,KAAA;;AAErB,QAAA,GAAA,EAAS;AACPD,MAAAA,GAAG,CAAHA,WAAAA,CAAAA,KAAAA,EAAuB,KAAvBA,YAAAA;AACD;;;SAqBHE,M,GAAAA,SAAAA,MAAAA,GAAS;AAAA,QACCC,QADD,GACc,KADd,KACc,CADd,QAAA;AAGP,WACE,MAAA,CAAA,OAAA,CAAA,aAAA,CAAC,WAAA,CAAD,OAAA,EAAA;AAAY,MAAA,OAAO,EAAE,KAAKC;AAA1B,KAAA,EADF,QACE,CADF;;;;EAnCqCR,MAAAA,CAAAA,S;;;8BAApBD,W,kBACG;AACpBE,EAAAA,QAAQ,EAAEC;AADU,C","sourcesContent":["// @flow\nimport React, { Component, type Node } from 'react';\nimport Initialize from './Initialize';\n\ntype Props = {\n  children: Node,\n  onChange?: Function,\n  event: string,\n};\n\ntype State = {\n  api?: Object,\n};\n\nexport default class LoginStatus extends Component<Props, State> {\n  static defaultProps = {\n    onChange: undefined,\n  };\n\n  state: State = {};\n\n  componentWillUnmount() {\n    const { state: { api }, props: { event } } = this;\n    if (api) {\n      api.unsubscribe(event, this.handleChange);\n    }\n  }\n\n  handleReady = async (api: Object): Promise<void> => {\n    const { event } = this.props;\n\n    this.setState({\n      api,\n    });\n\n    await api.subscribe(event, this.handleChange);\n  }\n\n  handleChange = (...args): void => {\n    const { onChange } = this.props;\n\n    if (onChange) {\n      onChange(...args);\n    }\n  }\n\n  render() {\n    const { children } = this.props;\n\n    return (\n      <Initialize onReady={this.handleReady}>\n        {children}\n      </Initialize>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}